
<!doctype html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Reaction Hub</title>

  <style>
    :root{
      --bg1:#f4f8ff;
      --bg2:#e9f1ff;

      --card:#ffffff;
      --stroke:#dbe7ff;

      --text:#1e293b;
      --muted:#64748b;

      --blue:#3b82f6;
      --blue2:#60a5fa;

      --soft:#f1f6ff;

      --shadow: 0 20px 40px rgba(59,130,246,.12);
    }

    *{box-sizing:border-box}

    body{
      margin:0;
      min-height:100vh;
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial;
      color:var(--text);
      background:
        radial-gradient(900px 400px at 10% 0%, #dbeafe, transparent 60%),
        radial-gradient(900px 500px at 90% 20%, #e0f2fe, transparent 60%),
        radial-gradient(900px 500px at 50% 95%, #eff6ff, transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      padding:24px 14px 40px;
      display:flex;
      justify-content:center;
      align-items:flex-start;
    }

    .frame{ width:min(480px, 100%); }

    .card{
      position:relative;
      background:var(--card);
      border:1px solid var(--stroke);
      border-radius:26px;
      box-shadow:var(--shadow);
      padding:22px 18px 18px;
      overflow:hidden;
    }

    .card::before{
      content:"";
      position:absolute;
      inset:-2px;
      border-radius:28px;
      padding:2px;
      background:linear-gradient(135deg, rgba(59,130,246,.35), rgba(96,165,250,.20), rgba(219,234,254,.55));
      -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      pointer-events:none;
    }

    /* ===== HEADER ===== */
    .top-pill{
      display:flex;
      justify-content:center;
      margin-bottom:14px;
      position:relative;
      z-index:1;
    }

    .pill{
      padding:10px 18px;
      border-radius:999px;
      background:var(--soft);
      border:1px solid var(--stroke);
      color:var(--blue);
      font-weight:800;
      letter-spacing:.18em;
      font-size:12px;
      text-transform:uppercase;
    }

    /* ===== TITLE ===== */
    h1{
      margin:6px 0 6px;
      font-size:40px;
      line-height:1.05;
      text-align:center;
      font-weight:900;
      position:relative;
      z-index:1;
    }

    h1 .accent{
      background:linear-gradient(90deg, var(--blue), var(--blue2));
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
    }

    .subtitle{
      margin:0 0 18px;
      text-align:center;
      color:var(--muted);
      font-size:14px;
      position:relative;
      z-index:1;
    }

    /* ===== TABS ===== */
    .tabs{
      display:flex;
      justify-content:space-between;
      gap:10px;
      margin:12px 0 14px;
      padding:0 2px;
      font-size:12px;
      letter-spacing:.12em;
      text-transform:uppercase;
      color:var(--muted);
      position:relative;
      z-index:1;
    }

    .tab{
      flex:1;
      padding:10px 10px;
      cursor:pointer;
      border-radius:12px;
      text-align:center;
      border:1px solid transparent;
      user-select:none;
    }

    .tab.active{
      color:var(--blue);
      background:var(--soft);
      border-color:var(--stroke);
      font-weight:800;
    }

    /* ===== FORM ===== */
    .field{ margin:14px 0; position:relative; z-index:1; }

    .label-row{
      display:flex;
      justify-content:space-between;
      margin-bottom:8px;
      padding:0 6px;
    }

    .label{
      font-size:11px;
      letter-spacing:.18em;
      text-transform:uppercase;
      color:var(--muted);
      font-weight:700;
    }

    .status{
      font-size:11px;
      letter-spacing:.18em;
      color:var(--blue);
      font-weight:800;
      text-transform:uppercase;
    }

    .input{
      width:100%;
      padding:14px 16px;
      border-radius:16px;
      border:1px solid var(--stroke);
      background:#f9fbff;
      color:var(--text);
      outline:none;
    }

    .input:focus{
      border-color:var(--blue);
      box-shadow:0 0 0 3px rgba(59,130,246,.15);
    }

    .input::placeholder{
      color:#94a3b8;
    }

    /* ===== HINT ===== */
    .hint{
      display:flex;
      gap:10px;
      margin-top:8px;
      padding:12px 14px;
      border-radius:14px;
      background:var(--soft);
      color:var(--muted);
      font-size:13px;
      border:1px solid var(--stroke);
    }

    .hint .i{
      width:20px;
      height:20px;
      border-radius:50%;
      background:white;
      border:1px solid var(--stroke);
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:900;
      color:var(--blue);
      flex:0 0 20px;
    }

    /* ===== BUTTONS ===== */
    .row2{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
      margin-top:10px;
      position:relative;
      z-index:1;
    }

    .btn2{
      padding:14px;
      border-radius:16px;
      border:1px solid var(--stroke);
      background:white;
      color:var(--blue);
      font-weight:900;
      letter-spacing:.12em;
      text-transform:uppercase;
      cursor:pointer;
    }

    .btn2:hover{
      background:var(--soft);
    }

    .btn{
      width:100%;
      margin-top:16px;
      padding:18px;
      border:none;
      border-radius:18px;
      background:linear-gradient(90deg, var(--blue), var(--blue2));
      color:white;
      font-weight:900;
      letter-spacing:.18em;
      text-transform:uppercase;
      font-size:15px;
      cursor:pointer;
      box-shadow:0 18px 40px rgba(59,130,246,.35);
      position:relative;
      z-index:1;
    }

    .btn:disabled{
      opacity:.6;
      cursor:not-allowed;
    }

    /* ===== FOOTER ===== */
    .footer{
      margin-top:14px;
      display:flex;
      justify-content:space-between;
      gap:10px;
      padding:0 6px;
      font-size:12px;
      color:var(--muted);
      position:relative;
      z-index:1;
    }

    .mono{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
    }

    /* ===== TOAST ===== */
    .toast{
      margin-top:14px;
      padding:14px;
      border-radius:16px;
      border:1px solid var(--stroke);
      background:#f8fbff;
      display:none;
      position:relative;
      z-index:1;
    }

    .toast.show{ display:block; }

    pre{
      margin-top:10px;
      padding:12px;
      border-radius:14px;
      background:white;
      border:1px solid var(--stroke);
      max-height:240px;
      overflow:auto;
    }

    /* ===== CREDIT BOX ===== */
    .credit{
      margin-top:14px;
      padding:14px;
      border-radius:18px;
      border:1px solid var(--stroke);
      background:linear-gradient(180deg, #ffffff, var(--soft));
      position:relative;
      z-index:1;
    }

    .credit-top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom:10px;
    }

    .credit-title{
      font-weight:900;
      letter-spacing:.08em;
    }

    .badge{
      font-size:11px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--stroke);
      background:white;
      color:var(--blue);
      font-weight:900;
      letter-spacing:.12em;
      text-transform:uppercase;
      white-space:nowrap;
    }

    .socials{
      display:grid;
      grid-template-columns:1fr;
      gap:8px;
    }

    .social{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid var(--stroke);
      background:white;
      text-decoration:none;
      color:var(--text);
    }

    .social small{
      color:var(--muted);
      font-weight:700;
      letter-spacing:.08em;
      text-transform:uppercase;
    }

    .social b{
      color:var(--blue);
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
      font-size:13px;
    }

    .social:hover{
      background:var(--soft);
    }

    .wa-bar{
      margin-top:10px;
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
    }

    .linkbtn{
      padding:12px 12px;
      border-radius:14px;
      border:1px solid var(--stroke);
      background:white;
      color:var(--blue);
      font-weight:900;
      letter-spacing:.10em;
      text-transform:uppercase;
      cursor:pointer;
      text-decoration:none;
      text-align:center;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .linkbtn:hover{ background:var(--soft); }

    @media (max-width:380px){
      h1{ font-size:36px; }
      .wa-bar{ grid-template-columns:1fr; }
    }
  </style>
</head>

<body>
  <div class="frame">
    <div class="card">
      <div class="top-pill">
        <div class="pill">CODEPALL</div>
      </div>

      <h1>REACTION <span class="accent">HUB</span></h1>
      <p class="subtitle"></p>

      <div class="tabs">
        <div class="tab active" id="tabTarget">TARGET CONFIGURATION</div>
        <div class="tab" id="tabLink">LINK POSTINGAN</div>
      </div>

      <div class="field">
        <div class="label-row">
          <div class="label">Link Postingan</div>
        </div>
        <input id="link" class="input" placeholder="" />
      </div>

      <div class="field">
        <div class="label-row">
          <div class="label">Reaction Payload</div>
          <div class="status" id="readyBadge">READY</div>
        </div>
        <input id="payload" class="input" placeholder="üî•, üöÄ, ‚ù§Ô∏è" />
        <div class="hint">
          <div class="i">i</div>
          <div></div>
        </div>
      </div>

      <div class="row2">
        <button class="btn2" id="openBtn">OPEN CHANNEL</button>
        <button class="btn2" id="clearBtn">CLEAR</button>
      </div>

      <button class="btn" id="runBtn">EXECUTE COMMAND ‚ö°</button>

      <div class="footer">
        <div>Backend: <span class="mono">/api/react</span></div>
        <div>Status: <span id="statusText" class="mono">idle</span></div>
      </div>

      <div class="toast" id="toast">
        <div id="toastMsg" class="mono"></div>
        <pre id="respBox" class="mono"></pre>
      </div>
    </div>
  </div>

  <script>
    const $ = (id) => document.getElementById(id);

    $("tabTarget").onclick = () => {
      $("tabTarget").classList.add("active");
      $("tabLink").classList.remove("active");
    };

    $("tabLink").onclick = () => {
      $("tabLink").classList.add("active");
      $("tabTarget").classList.remove("active");
      $("link").focus();
    };

    function showToast(msg, payload){
      $("toast").classList.add("show");
      $("toastMsg").textContent = msg;

      if (payload === undefined || payload === null) {
        $("respBox").textContent = "";
        return;
      }
      if (typeof payload === "string") $("respBox").textContent = payload;
      else $("respBox").textContent = JSON.stringify(payload, null, 2);
    }

    function normalizeReacts(str){
      return str
        .split(/[, ]+/)
        .map(s => s.trim())
        .filter(Boolean)
        .join(",");
    }

    $("openBtn").onclick = () => {
      const link = $("link").value.trim();
      if (!link) return showToast("‚ùå Isi link dulu buat dibuka.");
      window.open(link, "_blank", "noopener,noreferrer");
      showToast("‚úÖ Link dibuka. Follow/join manual dulu kalau perlu.");
    };

    $("clearBtn").onclick = () => {
      $("link").value = "";
      $("payload").value = "";
      $("statusText").textContent = "idle";
      $("toast").classList.remove("show");
    };

    $("runBtn").onclick = async () => {
      const link = $("link").value.trim();
      const payloadRaw = $("payload").value.trim();

      if (!link) return showToast("‚ùå Link postingan wajib diisi.");
      if (!payloadRaw) return showToast("‚ùå Reaction payload wajib diisi.");

      const reacts = normalizeReacts(payloadRaw);
      const body = { post_link: link, reacts };

      $("runBtn").disabled = true;
      $("statusText").textContent = "processing...";
      showToast("‚è≥ Mengirim request...", body);

      try{
        const res = await fetch("/api/react", {
          method: "POST",
          headers: { "content-type": "application/json" },
          body: JSON.stringify(body)
        });

        const text = await res.text();
        let data = text;
        try { data = JSON.parse(text); } catch {}

        if (res.ok) {
          $("statusText").textContent = "done";
          showToast("‚úÖ Sukses diproses.", data);
        } else {
          $("statusText").textContent = "error";
          showToast(`‚ùå Gagal (HTTP ${res.status})`, data);
        }
      } catch(e){
        $("statusText").textContent = "error";
        showToast("‚ùå Error request.", String(e));
      } finally{
        $("runBtn").disabled = false;
      }
    };

    // Copy channel link
    const CHANNEL_LINK = "https://whatsapp.com/channel/0029Vb6kx8FFi8xZBhjm2g0m";
    $("copyChannelBtn").onclick = async () => {
      try{
        await navigator.clipboard.writeText(CHANNEL_LINK);
        showToast("‚úÖ Link saluran WA ke-copy.", CHANNEL_LINK);
      }catch(e){
        showToast("‚ùå Gagal copy. Copy manual aja ya:", CHANNEL_LINK);
      }
    };
  </script>
</body>
</html>

